# ProJect_Calico
ƒê√°nh Gi√° Hi·ªáu NƒÉng M·∫°ng M√°y T√≠nh 


# Project Calico

<img src="Calico_Ghibli.png" alt="Calico" width="325"/>


## T·ªïng quan

Project Calico l√† m·ªôt gi·∫£i ph√°p m·∫°ng v√† b·∫£o m·∫≠t m√£ ngu·ªìn m·ªü, ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ cung c·∫•p ki·∫øn tr√∫c m·∫°ng ph√¢n t√°n, qu·∫£n l√Ω v√† ki·ªÉm so√°t l∆∞u l∆∞·ª£ng gi·ªØa c√°c pods, m√°y ·∫£o (VMs), v√† hosts m·ªôt c√°ch an to√†n, hi·ªáu qu·∫£ trong m√¥i tr∆∞·ªùng Kubernetes, Docker v√† OpenStack.

## Ki·∫øn tr√∫c

Calico s·ª≠ d·ª•ng m√¥ h√¨nh ƒë·ªãnh tuy·∫øn IP tr·ª±c ti·∫øp (pure IP networking) v√† ch√≠nh s√°ch m·∫°ng (Network Policies) ƒë·ªÉ qu·∫£n l√Ω traffic m·ªôt c√°ch linh ho·∫°t, hi·ªáu qu·∫£, v√† b·∫£o m·∫≠t cao. Calico t√≠ch h·ª£p m∆∞·ª£t m√† v·ªõi c√°c n·ªÅn t·∫£ng orchestrator container ph·ªï bi·∫øn nh∆∞ Kubernetes.

## T√≠nh nƒÉng ch√≠nh

### 1. Ch√≠nh s√°ch m·∫°ng (Network Policy)
- Qu·∫£n l√Ω traffic gi·ªØa c√°c ·ª©ng d·ª•ng.
- √Åp d·ª•ng m√¥ h√¨nh Zero Trust: ch·ªâ cho ph√©p c√°c k·∫øt n·ªëi x√°c th·ª±c.
- C·∫•u h√¨nh chi ti·∫øt theo ngu·ªìn, ƒë√≠ch, c·ªïng, giao th·ª©c.

### 2. Routing & Qu·∫£n l√Ω IP
- ƒê·ªãnh tuy·∫øn l∆∞u l∆∞·ª£ng d·ª±a tr√™n IP, ƒë∆°n gi·∫£n h√≥a vi·ªác qu·∫£n l√Ω m·∫°ng.

### 3. T√≠ch h·ª£p orchestrators
- H·ªó tr·ª£ Kubernetes, Docker, OpenStack.
- T·ª± ƒë·ªông h√≥a tri·ªÉn khai v√† c·∫•u h√¨nh m·∫°ng.

### 4. B·∫£o m·∫≠t n√¢ng cao
- M√£ h√≥a l∆∞u l∆∞·ª£ng.
- Ki·ªÉm tra, ph√°t hi·ªán b·∫•t th∆∞·ªùng.
- T√≠ch h·ª£p h·ªá th·ªëng SIEM ƒë·ªÉ gi√°m s√°t v√† c·∫£nh b√°o.

### 5. Quan s√°t (Observability)
- Logging t·∫≠p trung, theo d√µi to√†n di·ªán traffic m·∫°ng.
- Gi√°m s√°t hi·ªáu nƒÉng (Prometheus, Grafana).
- H·ªó tr·ª£ tracing, ph√¢n t√≠ch s·ª± c·ªë nhanh ch√≥ng.
- C·∫£nh b√°o t·ª± ƒë·ªông khi c√≥ v·∫•n ƒë·ªÅ x·∫£y ra.

### 6. Networking m·∫°nh m·∫Ω
- ƒê·ªãnh tuy·∫øn t·ªëi ∆∞u, gi·∫£m ƒë·ªô tr·ªÖ.
- Load Balancing th√¥ng minh.
- √Åp d·ª•ng ch√≠nh s√°ch Quality of Service (QoS).
- H·ªó tr·ª£ ƒëa giao th·ª©c (TCP, UDP, SCTP).

## Tri·ªÉn khai v√† Demo

### Chu·∫©n b·ªã m√¥i tr∆∞·ªùng
- Cluster Kubernetes (t·ªëi thi·ªÉu 3 nodes).
- H·ªá ƒëi·ªÅu h√†nh: Ubuntu/CentOS/RHEL.
- Container runtime: Docker/containerd.
- Tri·ªÉn khai Calico b·∫±ng YAML ho·∫∑c Helm.

### Tri·ªÉn khai ·ª©ng d·ª•ng m·∫´u
- ·ª®ng d·ª•ng b·∫£o m·∫≠t (app-secure): Pod nginx v·ªõi label role=trusted.
- ·ª®ng d·ª•ng m√¥ ph·ªèng attacker: Pod busybox kh√¥ng c√≥ label trusted.

### √Åp d·ª•ng Network Policy
- Ch√≠nh s√°ch cho ph√©p pod trusted truy c·∫≠p v√†o app-secure.
- Ch√≠nh s√°ch ch·∫∑n pod attacker.

### Ki·ªÉm th·ª≠
- Ki·ªÉm tra truy c·∫≠p h·ª£p l·ªá v√† tr√°i ph√©p.
- X√°c th·ª±c t√≠nh hi·ªáu qu·∫£ c·ªßa c√°c Network Policies.

### Gi√°m s√°t v√† Log
- S·ª≠ d·ª•ng OpenTelemetry ƒë·ªÉ thu th·∫≠p logs v√† metrics.
- Hi·ªÉn th·ªã logs v√† metrics tr√™n Grafana.
- C·∫•u h√¨nh c·∫£nh b√°o t·ª± ƒë·ªông khi c√≥ v·∫•n ƒë·ªÅ.

## H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng

### L·ªánh Calico th∆∞·ªùng d√πng
- `calicoctl get nodes`: xem nodes Calico qu·∫£n l√Ω.
- `calicoctl get networkpolicy`: xem policies ƒëang √°p d·ª•ng.
- `calicoctl ipam show`: xem IP pool v√† tr·∫°ng th√°i c·∫•p ph√°t IP.

### Truy c·∫≠p v√†o Pod
- V√†o pod ki·ªÉm tra connectivity:
```bash
kubectl exec -it <pod-name> -- sh
```

# Project Calico - Demo

## 1. M·ª•c ƒê√≠ch
Tr√¨nh b√†y m·ªôt demo v·ªÅ b·∫£o m·∫≠t m·∫°ng trong Kubernetes s·ª≠ d·ª•ng **Calico NetworkPolicy** k√®m theo gi√°m s√°t logs qua **OpenTelemetry Collector** v√† **Grafana Loki**.

---

## 2. Ki·∫øn tr√∫c demo

```
trusted-client --> app-secure (nginx)
attacker ------> app-secure (b·ªã ch·∫∑n)
                         |
OpenTelemetry Collector --> Loki --> Grafana
```

- 3 Node Minikube: control-plane + 2 workers
- Namespace: `networking-policy-demo`

---

## 3. C√†i ƒë·∫∑t Calico

```bash
kubectl apply -f https://raw.githubusercontent.com/projectcalico/calico/v3.27.3/manifests/tigera-operator.yaml
kubectl apply -f custom-resources.yaml
```
`custom-resources.yaml` bao g·ªìm:
- `Installation`: config VXLAN, IPPool CIDR
- `APIServer`: b·∫≠t Calico API server

Ho·∫∑c

```bash
minikube start --nodes=3 --cni=calico
```
- C√†i ƒë·∫∑t minikube t·∫°i ƒë∆∞·ªùng d·∫´n: [ Truy c·∫≠p trang ch√≠nh th·ª©c c·ªßa minkube t·∫°i ƒë√¢y.](https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download)


---

## 4. T·∫°o Pod Demo

- `app-secure`: nginx, label: `app=app-secure`
- `attacker`: busybox, label: `app=attacker`
- `trusted-client`: busybox, label: `run=access`

Tri·ªÉn khai b·∫±ng YAML Pod ho·∫∑c deployment.

---

## 5. Vi·∫øt NetworkPolicy

### 5.1 Ch·∫∑n attacker truy c·∫≠p app-secure
- D√πng file `deny-busybox-ingress.yaml` ƒë·ªÉ √°p d·ª•ng ch√≠nh s√°ch
```bash
calicoctl apply -f deny-busybox-ingress.yaml
```

### 5.2 Cho trusted-client ƒëi ra ngo√†i

- D√πng file `allow-busybox-egress.yaml` ƒë·ªÉ √°p d·ª•ng ch√≠nh s√°ch
```bash
calicoctl apply -f allow-busybox-egress.yaml
```

---

## 6. C√†i OpenTelemetry Collector

### ConfigMap: `otel-config.yaml`
- D√πng file `otel-config.yaml` trong th∆∞ m·ª•c OpenTelemetry
```bash
kubectl apply -f otel-config.yaml
```

Tri·ªÉn khai c√πng deployment otel-collector.
- D√πng file `otel-collector-deployment.yaml` trong th∆∞ m·ª•c OpenTelemetry
```bash
kubectl apply -f otel-collector-deployment.yaml
```


---

## 7. C√†i Grafana + Loki
- ƒê·ªÉ c√†i ƒë·∫∑t Grafana + Loki tr∆∞·ªõc h·∫øt b·∫°n ph·∫£i c√†i ƒë·∫∑t helm t·∫°i ƒë∆∞·ªùng d·∫´n n√†y: link [T·∫£i helm t·ª´ trang ch√≠nh th·ª©c](https://helm.sh/docs/intro/install/)
|| Sau ƒë√≥ c√†i ƒë·∫∑t Grafana, Loki
```bash
helm repo add grafana https://grafana.github.io/helm-charts
helm install loki grafana/loki-stack --namespace monitoring --create-namespace \
  --set grafana.enabled=false --set promtail.enabled=true
```

- ƒê·∫£m b·∫£o Loki ch·∫°y: `kubectl get pods -n monitoring`
- Port-forward Grafana: `kubectl port-forward svc/monitoring-grafana -n monitoring 3000:80`
- Khi s·ª≠ d·ª•ng l·ªánh kubectl get pod -n monitoring g·∫∑p ph·∫£i pod grafana b·ªã crashLoopback, s·ª≠ d·ª•ng l·ªánh sau ƒë·ªÉ kh·ªüi ch·∫°y l·∫°i pod ƒë√≥ `kubectl delete pod -n monitoring -l app.kubernetes.io/name=grafana`
---

## 8. Truy v·∫≠p Grafana
‚úÖ C√°ch l·∫•y m·∫≠t kh·∫©u Grafana

üìå B∆∞·ªõc 1: L·∫•y chu·ªói m√£ ho√° base64 t·ª´ Secret
`kubectl get secret -n monitoring monitoring-grafana -o jsonpath="{.data.admin-password}"`=> K·∫øt qu·∫£ s·∫Ω tr·∫£ ra m·ªôt chu·ªói d√†i

üìå B∆∞·ªõc 2: Gi·∫£i m√£ base64 

`[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("<chu·ªói b·∫°n nh·∫≠n ƒë∆∞·ª£c>"))`

üéØG·ªôp l·∫°i
```bash
$pwd = kubectl get secret -n monitoring monitoring-grafana -o jsonpath="{.data.admin-password}"
[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($pwd))

```

- L·∫•y m·∫≠t kh·∫©u m·∫∑c ƒë·ªãnh `kubectl get secret monitoring-grafana -n monitoring`, b·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c ƒëo·∫°n m√£ v√† h√£y copy l·∫°i v√† s·ª≠ d·ª•ng tr√¨nh gi·∫£i m√£ base64. 


1. V√†o tab **Explore**
2. Ch·ªçn Datasource: `Loki`
3. Query:
```logql
{pod="attacker"} |= "timeout"
```



---

## 9. Ki·ªÉm th·ª≠

```bash
kubectl exec -it attacker -n networking-policy-demo -- wget http://app-secure:80
```

‚û°Ô∏è Log b·ªã timeout xu·∫•t hi·ªán trong Grafana.

---

## 10. K·∫øt lu·∫≠n

- Calico ch·∫∑n truy c·∫≠p x√°c ƒë·ªãnh theo label v√† port
- OpenTelemetry thu log t·ª´ Pod
- Loki l∆∞u tr·ªØ, Grafana hi·ªÉn th·ªã log theo pod / namespace

‚úÖ Demo b√†o m·∫≠t m·∫°ng & quan s√°t log ƒë√£ ho√†n t·∫•t



---
<img src="./image/Topology.png" alt="topology" width="300"/>
---

# üìå **K·ªãch b·∫£n s·ªë 1**
D∆∞·ªõi ƒë√¢y l√† **k·ªãch b·∫£n chi ti·∫øt v√† ƒë·∫ßy ƒë·ªß nh·∫•t** cho vi·ªác m√¥ ph·ªèng m·ªôt **"cu·ªôc t·∫•n c√¥ng v√†o Pod Database"** trong Kubernetes, s·ª≠ d·ª•ng Project Calico ƒë·ªÉ b·∫£o v·ªá v√† ki·ªÉm so√°t truy c·∫≠p. M√¨nh s·∫Ω gi·∫£i th√≠ch t·ª´ng b∆∞·ªõc r√µ r√†ng ƒë·ªÉ b·∫°n hi·ªÉu c·∫∑n k·∫Ω v√† th·ª±c hi·ªán m·ªôt c√°ch d·ªÖ d√†ng nh·∫•t.

**M·ª•c ti√™u k·ªãch b·∫£n:**

B·∫°n ƒëang c√≥ m·ªôt h·ªá th·ªëng c∆° s·ªü d·ªØ li·ªáu (**PostgreSQL**) ch·∫°y trong Kubernetes, v√† b·∫°n mu·ªën m√¥ ph·ªèng m·ªôt k·ªãch b·∫£n m√† m·ªôt pod ƒë·ªôc h·∫°i (**attacker pod**) c·ªë t√¨nh truy c·∫≠p tr√°i ph√©p v√†o database, ƒë·ªÉ ki·ªÉm tra hi·ªáu qu·∫£ c·ªßa ch√≠nh s√°ch m·∫°ng (**NetworkPolicy**) ƒë∆∞·ª£c qu·∫£n l√Ω b·ªüi Calico.

---

# ‚öôÔ∏è **C√°c th√†nh ph·∫ßn trong demo**

B·∫°n s·∫Ω c√≥ 3 th√†nh ph·∫ßn:

1. **Pod database (PostgreSQL)**:
   - Namespace: `production`
   - Label: `app=db`
   - Port: `5432`
   - User/password database: `demo`/`demo123`

2. **Pod tin c·∫≠y (trusted client)**:
   - Label: `role=trusted`
   - Cho ph√©p truy c·∫≠p v√†o DB

3. **Pod attacker** (k·∫ª t·∫•n c√¥ng):
   - Label: `app=attacker`
   - Kh√¥ng ƒë∆∞·ª£c ph√©p truy c·∫≠p DB.

---


## üóÇÔ∏è **B∆∞·ªõc 1: Chu·∫©n b·ªã m√¥i tr∆∞·ªùng**

B·∫°n c·∫ßn c√≥ m·ªôt namespace `production`:

```bash
kubectl create namespace production
```

Tri·ªÉn khai database PostgreSQL:

```bash
kubectl apply -n production -f postgres-db.yaml
```

(T·ªáp `postgres-db.yaml` ƒë√£ t·∫°o tr∆∞·ªõc ƒë√≥, g·ªìm deployment PostgreSQL.)

---

## üõ°Ô∏è **B∆∞·ªõc 2: √Åp d·ª•ng NetworkPolicy**

### ‚ë† **Default Deny** *(kh√≥a to√†n b·ªô namespace tr∆∞·ªõc)*

`default-deny.yaml`:

```yaml
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: default-deny
  namespace: production
spec:
  selector: all()
  types:
  - Ingress
  - Egress
  ingress: []
  egress: []
```

√Åp d·ª•ng:

```bash
calicoctl create -f default-deny.yaml
```

‚û°Ô∏è **T√°c d·ª•ng**: T·∫•t c·∫£ traffic v√†o v√† ra t·ª´ m·ªçi pod ƒë·ªÅu b·ªã ch·∫∑n (deny).

---

### ‚ë° **Cho ph√©p pod trusted truy c·∫≠p v√†o DB**

T·∫°o file `allow-trusted-to-db.yaml`:

```yaml
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-trusted-to-db
  namespace: production
spec:
  selector: app == 'db'
  types: 
  - Ingress
  ingress:
  - action: Allow
    protocol: TCP
    source:
      selector: role == 'trusted'
    destination:
      ports:
      - 5432
```

√Åp d·ª•ng policy:

```bash
calicoctl create -f allow-trusted-to-db.yaml
```

‚û°Ô∏è **T√°c d·ª•ng**: Ch·ªâ pod c√≥ nh√£n `role=trusted` ƒë∆∞·ª£c ph√©p truy c·∫≠p v√†o DB tr√™n c·ªïng 5432.

---

## üöÄ **B∆∞·ªõc 3: Tri·ªÉn khai pod attacker**

T·∫°o file `app-attacker.yaml`:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-attacker
  namespace: production
  labels:
    app: attacker
spec:
  containers:
  - name: attacker
    image: busybox
    command: ["sleep", "3600"]
```

√Åp d·ª•ng attacker pod:

```bash
kubectl apply -f app-attacker.yaml
```

---

## üïµÔ∏è **B∆∞·ªõc 4: M√¥ ph·ªèng cu·ªôc t·∫•n c√¥ng t·ª´ pod attacker**

### **‚ë† V√†o trong pod attacker**:

```bash
kubectl exec -it app-attacker -n production -- sh
```

### **‚ë° T·∫•n c√¥ng v√†o DB b·∫±ng c√°ch qu√©t c·ªïng**:

Th·ª≠ ki·ªÉm tra xem c√≥ th·ªÉ k·∫øt n·ªëi t·ªõi database:

```sh
nc -zv postgres 5432
```

ho·∫∑c

```sh
telnet postgres 5432
```

### **‚ë¢ K·∫øt qu·∫£ mong ƒë·ª£i (b·ªã ch·∫∑n)**:

```
postgres (10.96.x.x:5432): Connection timed out
```

ho·∫∑c

```
telnet: can't connect to remote host (10.96.x.x): Connection refused
```

‚û°Ô∏è T·ª©c l√† ch√≠nh s√°ch Calico ƒë√£ ch·∫∑n cu·ªôc t·∫•n c√¥ng.

---

## ‚úÖ **B∆∞·ªõc 5: M√¥ ph·ªèng truy c·∫≠p h·ª£p l·ªá (trusted)**

T·∫°o nhanh m·ªôt pod trusted ƒë·ªÉ ki·ªÉm th·ª≠ h·ª£p l·ªá:

```bash
kubectl run trusted-client --rm -it --image=postgres:15-alpine \
  --namespace=production --labels=role=trusted \
  -- psql -h postgres -U demo -d demodb
```

K·∫øt qu·∫£ mong ƒë·ª£i:

```
Password for user demo:
```

‚û°Ô∏è Nh·∫≠p `demo123`, truy c·∫≠p th√†nh c√¥ng.

---

## üìä **B∆∞·ªõc 6: Gi√°m s√°t v√† log (Observability)**

- B·∫°n ƒë√£ c√†i OpenTelemetry Collector + Loki/Grafana tr∆∞·ªõc ƒë√≥.

### **‚ë† Xem log b·ªã ch·∫∑n trong Grafana**:

- M·ªü Grafana ‚û°Ô∏è Explore ‚û°Ô∏è Loki datasource.
- Query log pod attacker:

```logql
{pod="app-attacker"} |= "Connection timed out"
```

- B·∫°n s·∫Ω th·∫•y r√µ log v·ªÅ c√°c cu·ªôc t·∫•n c√¥ng b·ªã t·ª´ ch·ªëi:
```
app-attacker | wget: connection timed out
app-attacker | nc: connection timed out
```

‚û°Ô∏è Cho th·∫•y policy c·ªßa Calico ho·∫°t ƒë·ªông t·ªët.

---

# üìå **T√≥m t·∫Øt to√†n b·ªô k·ªãch b·∫£n (slide)**

#### 1. Chu·∫©n b·ªã m√¥i tr∆∞·ªùng & Pod database.
#### 2. √Åp d·ª•ng ch√≠nh s√°ch m·∫°ng Calico:
   - **Default deny** (ch·∫∑n to√†n b·ªô).
   - **Cho ph√©p trusted v√†o DB**.
#### 3. Pod attacker c·ªë t·∫•n c√¥ng v√†o DB (th·∫•t b·∫°i).
#### 4. Pod trusted truy c·∫≠p DB (th√†nh c√¥ng).
#### 5. X√°c nh·∫≠n log trong Grafana th·ªÉ hi·ªán r√µ traffic b·ªã ch·∫∑n.

---


## üìù **T·∫°i sao l√†m demo n√†y? (Gi·∫£i th√≠ch th√™m)**

- *Ch·ª©ng minh kh·∫£ nƒÉng b·∫£o v·ªá m·∫°ng n·ªôi b·ªô v·ªõi Calico.*
- *Minh h·ªça m√¥ h√¨nh Zero Trust.*
- *Quan s√°t tr·ª±c quan v√† log r√µ r√†ng v·ªÅ c√°c cu·ªôc t·∫•n c√¥ng b·ªã ch·∫∑n.*

---

# üìå **K·ªãch b·∫£n s·ªë 2** 
M√¥ t·∫£: ƒê√¢y s·∫Ω l√† k·ªãch b·∫£n demo v·ªÅ kh·∫£ nƒÉng m√£ h√≥a c·ªßa calico v·ªõi WireGuard. Traffic gi·ªØa pod-to-pod s·∫Ω ƒë∆∞·ª£c m√£ h√≥a ngƒÉn ch·∫∑n nghe l√©n v√† ƒë·∫£m b·∫£o b·∫£o m·∫≠t d·ªØ li·ªáu

üéØ M·ª•c ti√™u:
- Minh h·ªça r·∫±ng Calico c√≥ th·ªÉ m√£ h√≥a t·∫•t c·∫£ l∆∞u l∆∞·ª£ng gi·ªØa c√°c node.

- So s√°nh l∆∞u l∆∞·ª£ng tr∆∞·ªõc/sau khi b·∫≠t m√£ h√≥a.

- D√πng Wireshark ho·∫∑c tcpdump ƒë·ªÉ ch·ª©ng minh r·∫±ng l∆∞u l∆∞·ª£ng ƒë√£ ƒë∆∞·ª£c m√£ h√≥a (kh√¥ng ƒë·ªçc ƒë∆∞·ª£c n·ªôi dung).

## Ki·ªÉm tra  m√¥i tr∆∞·ªùng h·ªó tr·ª£
- *Kernel ‚â• 5.6 (Ubuntu 20.04/22.04)*
- *Calico >v3.13*
- *CNI Calico ƒëang ch·∫°y*

## üß™ B∆∞·ªõc 1: B·∫≠t m√£ h√≥a WireGuard trong Calico
‚öôÔ∏è C·∫•u h√¨nh ƒë∆°n gi·∫£n b·∫±ng calicoctl
```bash
calicoctl patch felixconfiguration default --patch='{"spec": {"wireguardEnabled": true}}'
```

## üîç B∆∞·ªõc 2: Ki·ªÉm tra tr·∫°ng th√°i WireGuard
```bash
calicoctl get node -o wide
```
‚û°Ô∏è S·∫Ω c√≥ c·ªôt Wireguard Public Key hi·ªÉn th·ªã

ssh v√†o node ƒë·ªÉ ki·ªÉm tra: 
```bash
sudo wg show
```
‚û°Ô∏è S·∫Ω th·∫•y c√°c interface v√† peer m√£ h√≥a v·ªõi wg0 ho·∫∑c wg.calico

## üì¶ B∆∞·ªõc 3: G·ª≠i l∆∞u l∆∞·ª£ng gi·ªØa 2 pod tr√™n 2 node kh√°c nhau
```bash
kubectl exec -it pod-A -- curl pod-B
```
‚û°Ô∏è ƒê·∫£m b·∫£o 2 pod ch·∫°y tr√™n 2 node kh√°c nhau

## üïµÔ∏è B∆∞·ªõc 4: B·∫Øt g√≥i tin v√† ch·ª©ng minh ƒë√£ m√£ h√≥a
- SSH v√†o 1 node b·∫•t k·ª≥ v√† d√πng tcpdump:
```bash
sudo tcpdump -i <interface> port 51820
```

üìå 51820 l√† c·ªïng WireGuard m·∫∑c ƒë·ªãnh
- N·∫øu ch∆∞a b·∫≠t WireGuard ‚ûù b·∫°n s·∫Ω th·∫•y g√≥i TCP th√¥ng th∆∞·ªùng
- N·∫øu ƒë√£ b·∫≠t ‚ûù b·∫°n s·∫Ω ch·ªâ th·∫•y g√≥i UDP m√£ h√≥a, kh√¥ng ƒë·ªçc ƒë∆∞·ª£c n·ªôi dung payload

## üìà B∆∞·ªõc 5: K·∫øt h·ª£p gi√°m s√°t
- Trong Grafana: c√≥ th·ªÉ gi√°m s√°t l∆∞u l∆∞·ª£ng outbound pod
- Trong log: c√≥ th·ªÉ log l·∫°i c√°c k·∫øt n·ªëi gi·ªØa c√°c node


## K·∫øt lu·∫≠n

Project Calico gi√∫p qu·∫£n l√Ω m·∫°ng v√† b·∫£o m·∫≠t m·ªôt c√°ch linh ho·∫°t, hi·ªáu qu·∫£ trong m√¥i tr∆∞·ªùng Kubernetes. C√°c ch√≠nh s√°ch m·∫°ng, quan s√°t, v√† kh·∫£ nƒÉng b·∫£o m·∫≠t n√¢ng cao gi√∫p ƒë√°p ·ª©ng nhu c·∫ßu c·ªßa c√°c h·ªá th·ªëng hi·ªán ƒë·∫°i v√† an to√†n.


